{"version":3,"file":"ngx-summernote.js","sources":["ng://ngx-summernote/lib/code-block.button.ts","ng://ngx-summernote/lib/ngx-summernote.directive.ts","ng://ngx-summernote/lib/ngx-summernote-view.directive.ts","ng://ngx-summernote/lib/ngx-summernote.module.ts"],"sourcesContent":["declare var $;\n\nconst codeBlockButtonStyle = `font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;\nfont-size: 12px;\npadding: 14px 12px;\nmargin-bottom: 12px;\nline-height: 1.42857;\nword-break: break-all;\noverflow-wrap: break-word;\nbackground-color: rgb(250, 251, 253);\nborder: 1px solid rgb(234, 236, 240);\nborder-radius: 4px; color: #60a0b0;\nwhite-space: pre-wrap;`;\n\nexport const codeBlockButton = function(context) {\n  const ui = $.summernote.ui;\n\n  // create button\n  const button = ui.button({\n    contents: '<i class=\"note-icon-frame\" style=\"margin-right: 4px\"></i> Code block',\n    tooltip: 'Add code block',\n    container: '.note-editor',\n    className: 'note-btn',\n    click: function() {\n      let selectedText = null;\n      // The below code will copy the selected block and add it into our code block\n      if (window.getSelection) {\n        selectedText = window\n          .getSelection()\n          .toString()\n          .replace(/^\\s+|\\s+$/g, '');\n      }\n      const codeText = selectedText ? selectedText : `Place your code here.`;\n      const codeBlock = `<pre class=\"code-block\" style=\"${codeBlockButtonStyle}\">${codeText}</pre>`;\n      context.invoke('editor.pasteHTML', codeBlock);\n    }\n  });\n\n  return button.render(); // return button as jquery object\n};\n","import { HttpClient } from '@angular/common/http';\nimport {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { combineLatest, Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { SummernoteOptions } from './summernote-options';\nimport { codeBlockButton } from './code-block.button';\n\ndeclare var $;\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[ngxSummernote]',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NgxSummernoteDirective),\n      multi: true\n    }\n  ]\n})\nexport class NgxSummernoteDirective\n  implements ControlValueAccessor, OnInit, OnDestroy, OnChanges {\n  @Input() set ngxSummernote(options: SummernoteOptions) {\n    if (options) {\n      if (!options.buttons) {\n        options.buttons = {};\n      }\n\n      options.callbacks = {\n        ...options.callbacks,\n        onImageUpload: files => this.uploadImage(files),\n        onMediaDelete: files =>\n          this.mediaDelete.emit({ url: $(files[0]).attr('src') })\n      };\n\n      // add custom buttons\n      options.buttons.codeBlock = codeBlockButton;\n\n      Object.assign(this._options, options);\n    }\n  }\n\n  // summernoteModel directive as input: store initial editor content\n  @Input() set summernoteModel(content: any) {\n    this.updateEditor(content);\n  }\n\n  // summernoteModel directive as output: update model if editor contentChanged\n  @Output() summernoteModelChange: EventEmitter<any> = new EventEmitter<any>();\n  @Output() imageUpload: EventEmitter<any> = new EventEmitter<any>();\n  @Output() mediaDelete: EventEmitter<any> = new EventEmitter<any>();\n\n  // // summernoteInit directive as output: send manual editor initialization\n  // @Output() summernoteInit: EventEmitter<Object> = new EventEmitter<Object>();\n\n  @Output() blur: EventEmitter<any> = new EventEmitter<any>();\n\n  @Input() ngxSummernoteDisabled: boolean;\n\n  private _options: SummernoteOptions = {};\n\n  private SPECIAL_TAGS: string[] = ['img', 'button', 'input', 'a'];\n  private INNER_HTML_ATTR = 'innerHTML';\n  private _hasSpecialTag: boolean;\n  private _$element: any; // jquery wrapped element\n  private _editor: any; // editor element\n  private _model: string;\n  private _oldModel: string = null;\n  private _editorInitialized: boolean;\n\n  private uploadSub: Subscription;\n\n  constructor(\n    private el: ElementRef,\n    private zone: NgZone,\n    private http: HttpClient\n  ) {\n    const element: any = el.nativeElement;\n\n    // check if the element is a special tag\n    if (this.SPECIAL_TAGS.indexOf(element.tagName.toLowerCase()) !== -1) {\n      this._hasSpecialTag = true;\n    }\n\n    // jquery wrap and store element\n\n    // this._$element = <any>$(element);\n\n    this.zone = zone;\n  }\n\n  ngOnInit() {\n    this.createEditor();\n  }\n\n  ngOnChanges(changes) {\n    if (this._editorInitialized && changes) {\n      if (\n        changes.ngxSummernoteDisabled &&\n        !changes.ngxSummernoteDisabled.firstChange &&\n        changes.ngxSummernoteDisabled.currentValue !==\n          changes.ngxSummernoteDisabled.previousValue\n      ) {\n        if (changes.ngxSummernoteDisabled.currentValue) {\n          this._$element.summernote('disable');\n        } else {\n          this._$element.summernote('enable');\n        }\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroyEditor();\n    if (this.uploadSub) {\n      this.uploadSub.unsubscribe();\n    }\n  }\n\n  // Begin ControlValueAccesor methods.\n  onChange = (_: any) => {};\n  onTouched = () => {};\n\n  // Form model content changed.\n  writeValue(content: any): void {\n    this.updateEditor(content);\n  }\n\n  registerOnChange(fn: (_: any) => void): void {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  // Update editor with model contents.\n  private updateEditor(content: any) {\n    if (JSON.stringify(this._oldModel) === JSON.stringify(content)) {\n      return;\n    }\n\n    this._oldModel = content;\n    // this._$element.html(content);\n\n    if (this._editorInitialized) {\n      this._$element.summernote('code', content);\n    } else {\n      this._$element.html(content);\n    }\n  }\n\n  // update model if editor contentChanged\n  private updateModel(content?: any) {\n    // console.log('update model', content)\n    this.zone.run(() => {\n      let modelContent: any = null;\n\n      if (this._hasSpecialTag) {\n        const attributeNodes = this._$element[0].attributes;\n        const attrs = {};\n\n        for (let i = 0; i < attributeNodes.length; i++) {\n          const attrName = attributeNodes[i].name;\n          if (\n            this._options.angularIgnoreAttrs &&\n            this._options.angularIgnoreAttrs.indexOf(attrName) !== -1\n          ) {\n            continue;\n          }\n          attrs[attrName] = attributeNodes[i].value;\n        }\n\n        if (this._$element[0].innerHTML) {\n          attrs[this.INNER_HTML_ATTR] = this._$element[0].innerHTML;\n        }\n\n        modelContent = attrs;\n      } else {\n        const returnedHtml: any = content || '';\n        if (typeof returnedHtml === 'string') {\n          modelContent = returnedHtml;\n        }\n      }\n      if (this._oldModel !== modelContent) {\n        this._oldModel = modelContent;\n        // Update summernoteModel\n        this.summernoteModelChange.emit(modelContent);\n        // Update form model.\n        this.onChange(content);\n      }\n    });\n  }\n\n  private initListeners() {\n    const self = this;\n\n    if (!this._$element) {\n      return;\n    }\n\n    this._$element.on('summernote.init', function() {\n      setTimeout(function() {\n        self.updateModel();\n      }, 0);\n    });\n\n    this._$element.on('summernote.change', function(\n      event,\n      contents,\n      $editable\n    ) {\n      setTimeout(function() {\n        self.updateModel(contents);\n      }, 0);\n    });\n\n    this._$element.on('summernote.blur', function() {\n      setTimeout(function() {\n        self.onTouched();\n        self.blur.emit();\n      }, 0);\n    });\n\n    if (this._options.immediateAngularModelUpdate) {\n      this._editor.on('keyup', function() {\n        setTimeout(function() {\n          self.updateModel();\n        }, 0);\n      });\n    }\n  }\n\n  private createEditor() {\n    if (this._editorInitialized) {\n      return;\n    }\n\n    this.setContent(true);\n\n    const wait = 50;\n    // this.initListeners(); // issue #31\n    try {\n      this._$element = <any>$(this.el.nativeElement);\n    } catch (error) {\n      console.log(`JQuery seems not te loaded yet! Wait ${wait}ms and try again`);\n    }\n\n    if (!this._$element) {\n      setTimeout(() => {\n        this.createEditor();\n      }, wait);\n    } else {\n      // init editor\n      this.zone.runOutsideAngular(() => {\n        this._editor = this._$element\n          .summernote(this._options)\n          .data('summernote').$note;\n\n        this.initListeners(); // issue #31\n\n        if (this.ngxSummernoteDisabled) {\n          this._$element.summernote('disable');\n        }\n      });\n      this._editorInitialized = true;\n    }\n  }\n\n  private setHtml() {\n    this._$element.summernote('code', this._model || '', true);\n  }\n\n  private setContent(firstTime = false) {\n    // console.log('set content', firstTime, this._oldModel, this._model)\n    const self = this;\n    // Set initial content\n    if (this._model || this._model === '') {\n      this._oldModel = this._model;\n      if (this._hasSpecialTag) {\n        const tags: Object = this._model;\n        // add tags on element\n        if (tags) {\n          for (const attr in tags) {\n            if (tags.hasOwnProperty(attr) && attr !== this.INNER_HTML_ATTR) {\n              this._$element.attr(attr, tags[attr]);\n            }\n          }\n\n          if (tags.hasOwnProperty(this.INNER_HTML_ATTR)) {\n            this._$element[0].innerHTML = tags[this.INNER_HTML_ATTR];\n          }\n        }\n      } else {\n        self.setHtml();\n      }\n    }\n  }\n\n  private destroyEditor() {\n    if (this._editorInitialized) {\n      this._editor.off('keyup');\n      this._$element.summernote('destroy'); // TODO not sure it works now...\n      this._editorInitialized = false;\n    }\n  }\n\n  // private getEditor() {\n  //   if (this._$element) {\n  //     return this._$element.summernote.bind(this._$element);\n  //   }\n\n  //   return null;\n  // }\n\n  private async uploadImage(files) {\n    if (this._options.uploadImagePath) {\n      this.imageUpload.emit({ uploading: true });\n\n      const requests = [];\n      for (const file of files) {\n        const data = new FormData();\n        data.append('image', file);\n        const obs = this.http\n          .post(this._options.uploadImagePath, data, this._options.uploadImageRequestOptions)\n          .pipe(\n            map(\n              (response: { path: string }) =>\n                response && typeof response.path === 'string' && response.path\n            )\n          );\n        requests.push(obs);\n      }\n\n      this.uploadSub = combineLatest(requests).subscribe(\n        (remotePaths: string[]) => {\n          for (const remotePath of remotePaths) {\n            this._$element.summernote('insertImage', remotePath);\n          }\n          this.imageUpload.emit({ uploading: false });\n        },\n        err => this.insertFromDataURL(files)\n      );\n    } else {\n      this.insertFromDataURL(files);\n    }\n  }\n\n  insertFromDataURL(files) {\n    for (const file of files) {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this._$element.summernote('insertImage', reader.result);\n        this.imageUpload.emit({ uploading: false, encoding: 'base64' });\n      };\n      reader.onerror = error => console.error(error);\n    }\n  }\n}\n","import {\n    Directive, Input, ElementRef, Renderer2, AfterViewInit\n} from '@angular/core';\n\ndeclare var $;\n\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[ngxSummernoteView]'\n})\nexport class NgxSummernoteViewDirective implements AfterViewInit {\n    @Input() set ngxSummernoteView(content: string) {\n        this._element.innerHTML = content || '';\n    }\n\n    private _element: any;\n\n    constructor(\n        private renderer2: Renderer2,\n        element: ElementRef\n    ) {\n        this._element = element.nativeElement;\n    }\n\n    ngAfterViewInit() {\n        this.renderer2.addClass(this._element, 'ngx-summernote-view');\n    }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { NgxSummernoteDirective } from './ngx-summernote.directive';\nimport { NgxSummernoteViewDirective } from './ngx-summernote-view.directive';\n\n@NgModule({\n  declarations: [\n    NgxSummernoteDirective,\n    NgxSummernoteViewDirective\n  ],\n  exports: [\n    NgxSummernoteDirective,\n    NgxSummernoteViewDirective\n  ]\n})\nexport class NgxSummernoteModule {\n  public static forRoot(): ModuleWithProviders<NgxSummernoteModule> {\n    return {ngModule: NgxSummernoteModule,  providers: []};\n  }\n}\n"],"names":[],"mappings":"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"}